#!/bin/bash

# VID Provenance Git Hook - prepare-commit-msg
# This hook adds a provenance section to your commit message template

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2

# Only add template if this is a regular commit (not merge, squash, etc.)
if [ -z "$COMMIT_SOURCE" ]; then
    # Check if provenance section already exists
    if ! grep -q "@provenance" "$COMMIT_MSG_FILE"; then
        # Add provenance template to the commit message
        cat >> "$COMMIT_MSG_FILE" << 'EOF'

# Provenance (remove this section if not applicable)
# Uncomment the lines that apply:
#
# @provenance human-original
# @provenance ai-generated
# @provenance ai-assisted
# @provenance mixed
#
# If AI was involved, also add:
# @tool <name-of-ai-tool>
# @verification deep|standard|light|unreviewed
# @reviewer <your-email>
EOF
    fi
fi
